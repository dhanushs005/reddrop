<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>YouTube Video Downloader - RedDrop</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            rel="icon"
            href="https://www.youtube.com/s/desktop/6e44c342/img/favicon_144x144.png"
        />
        <style>
            /* Custom keyframes for bounce animation */
            @keyframes bounceIn {
                0%,
                20%,
                40%,
                60%,
                80%,
                100% {
                    animation-timing-function: cubic-bezier(
                        0.215,
                        0.61,
                        0.355,
                        1
                    );
                }
                0% {
                    opacity: 0;
                    transform: scale3d(0.3, 0.3, 0.3);
                }
                20% {
                    transform: scale3d(1.1, 1.1, 1.1);
                }
                40% {
                    transform: scale3d(0.9, 0.9, 0.9);
                }
                60% {
                    opacity: 1;
                    transform: scale3d(1.03, 1.03, 1.03);
                }
                80% {
                    transform: scale3d(0.97, 0.97, 0.97);
                }
                100% {
                    opacity: 1;
                    transform: scale3d(1, 1, 1);
                }
            }

            .animate-bounce-in {
                animation: bounceIn 0.8s;
            }

            /* Custom keyframes for subtle spin */
            @keyframes spinSlow {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }
            @keyframes spinSlowReverse {
                from {
                    transform: rotate(360deg);
                }
                to {
                    transform: rotate(0deg);
                }
            }
            .animate-spin-slow {
                animation: spinSlow 30s linear infinite;
            }
            .animate-spin-slow-reverse {
                animation: spinSlowReverse 30s linear infinite;
            }

            /* Custom keyframes for fade in animations */
            @keyframes fadeInDown {
                from {
                    opacity: 0;
                    transform: translate3d(0, -20px, 0);
                }
                to {
                    opacity: 1;
                    transform: translate3d(0, 0, 0);
                }
            }
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translate3d(0, 20px, 0);
                }
                to {
                    opacity: 1;
                    transform: translate3d(0, 0, 0);
                }
            }
            .animate-fade-in-down {
                animation: fadeInDown 0.8s ease-out forwards;
            }
            .animate-fade-in-up {
                animation: fadeInUp 0.8s ease-out forwards 0.2s; /* Delayed start */
            }

            /* Custom keyframes for small bounce on button icon */
            @keyframes bounceSmall {
                0%,
                100% {
                    transform: translateY(0);
                }
                50% {
                    transform: translateY(-3px);
                }
            }
            .animate-bounce-sm {
                animation: bounceSmall 1s infinite;
            }

            /* Custom keyframes for pulse slow */
            @keyframes pulseSlow {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            .animate-pulse-slow {
                animation: pulseSlow 3s infinite;
            }

            /* Custom scrollbar for better aesthetics */
            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-track {
                background: #e0e0e0;
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb {
                background: linear-gradient(135deg, #ef4444, #ec4899);
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(135deg, #dc2626, #db2777);
            }
        </style>
    </head>
    <body
        class="bg-gradient-to-br from-blue-100 to-purple-100 text-gray-800 font-sans"
    >
        <header
            class="bg-white shadow-lg sticky top-0 z-20 transition-all duration-300 hover:shadow-xl"
        >
            <div
                class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"
            >
                <h1
                    class="text-2xl font-extrabold text-red-600 flex items-center"
                >
                    <svg
                        class="w-7 h-7 mr-2 animate-pulse"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 10l4.555-4.555A2 2 0 0121 7.05v9.9A2 2 0 0119.445 18L15 13.445V18a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h7a2 2 0 012 2v4zm-1 0h-2M9 10H7"
                        ></path>
                    </svg>
                    RedDrop
                </h1>
                <span class="text-sm text-gray-500 font-medium"
                    >by Dhanush ✨</span
                >
            </div>
        </header>

        <section
            class="bg-gradient-to-br from-red-500 via-pink-500 to-purple-600 text-white py-20 text-center relative overflow-hidden"
        >
            <div class="absolute inset-0 bg-black opacity-20"></div>
            <div class="max-w-3xl mx-auto px-6 relative z-10">
                <h2
                    class="text-5xl md:text-6xl font-extrabold mb-4 leading-tight animate-fade-in-down"
                >
                    Download YouTube Videos Instantly
                </h2>
                <p class="text-lg md:text-xl opacity-90 animate-fade-in-up">
                    Enter a YouTube link, choose a resolution, and download your
                    favorite videos directly in WebM/MP4 format with ease.
                </p>
            </div>
            <div
                class="absolute top-0 left-0 w-32 h-32 bg-white opacity-5 rounded-full -translate-x-1/2 -translate-y-1/2 animate-spin-slow"
            ></div>
            <div
                class="absolute bottom-0 right-0 w-48 h-48 bg-white opacity-5 rounded-full translate-x-1/2 translate-y-1/2 animate-spin-slow-reverse"
            ></div>
        </section>

        <section class="py-16 px-4 flex justify-center items-center">
            <div
                class="max-w-md w-full bg-white shadow-xl p-8 rounded-2xl border border-gray-200 transform transition-all duration-500 hover:shadow-2xl animate-bounce-in"
            >
                <h3
                    class="text-3xl font-bold mb-8 text-center text-gray-900 flex items-center justify-center"
                >
                    <svg
                        class="w-8 h-8 mr-3 text-red-600"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.318 16.403l-7.904-4.403 7.904-4.403v8.806z"
                        />
                    </svg>
                    Video Downloader
                </h3>

                <div class="mb-6">
                    <label
                        for="url"
                        class="block text-gray-700 text-sm font-semibold mb-2"
                        >YouTube Video URL</label
                    >
                    <input
                        id="url"
                        type="text"
                        placeholder="e.g., https://www.youtube.com/watch?v=dQw4w9WgXcQ"
                        class="w-full border border-gray-300 px-5 py-3 rounded-lg focus:ring-4 focus:ring-red-400 focus:border-red-500 transition-all duration-300 ease-in-out text-gray-800 placeholder-gray-400 text-base"
                    />
                </div>

                <div class="mb-8">
                    <label
                        for="resolution"
                        class="block text-gray-700 text-sm font-semibold mb-2"
                        >Select Resolution</label
                    >
                    <div class="relative">
                        <select
                            id="resolution"
                            class="w-full border border-gray-300 px-5 py-3 rounded-lg appearance-none bg-white pr-10 focus:ring-4 focus:ring-red-400 focus:border-red-500 transition-all duration-300 ease-in-out text-gray-800 text-base cursor-pointer"
                        >
                            <option value="">Choose a quality...</option>
                            <option value="144">144p (Low)</option>
                            <option value="240">240p</option>
                            <option value="360">360p (Standard)</option>
                            <option value="480">480p</option>
                            <option value="720">720p (HD)</option>
                            <option value="1080">1080p (Full HD)</option>
                            <option value="1440">1440p (2K)</option>
                            <option value="2160">2160p (4K)</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-700"
                        >
                            <svg
                                class="fill-current h-5 w-5"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"
                                />
                            </svg>
                        </div>
                    </div>
                </div>

                <button
                    onclick="startDownload()"
                    class="w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white font-bold py-3 rounded-lg transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-red-300 focus:ring-opacity-75 flex items-center justify-center text-lg"
                >
                    <svg
                        class="w-6 h-6 mr-3 animate-bounce-sm"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                        ></path>
                    </svg>
                    Download Video
                </button>

                <div
                    class="mt-8 hidden transition-all duration-500 ease-in-out"
                    id="progressBar"
                >
                    <div class="flex justify-between items-center mb-2">
                        <span
                            class="text-gray-700 text-sm font-semibold"
                            id="progressText"
                            >Processing...</span
                        >
                        <span
                            class="text-gray-700 text-sm font-semibold"
                            id="percentageText"
                            >0%</span
                        >
                    </div>
                    <div
                        class="w-full bg-gray-200 rounded-full h-3.5 overflow-hidden"
                    >
                        <div
                            id="progressFill"
                            class="bg-gradient-to-r from-green-400 to-green-600 h-full rounded-full transition-all duration-500 ease-out"
                            style="width: 0%"
                        ></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-white py-16 px-4 shadow-inner">
            <div class="max-w-5xl mx-auto text-center">
                <h3 class="text-4xl font-extrabold mb-6 text-gray-900">
                    Why Use RedDrop?
                </h3>
                <p
                    class="text-gray-700 text-lg md:text-xl mb-10 leading-relaxed"
                >
                    Whether you're a student saving educational videos, a
                    content creator backing up your work, or just a casual
                    viewer wanting offline access to your favorite clips — this
                    powerful and user-friendly tool is designed for you.
                </p>
                <div
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"
                >
                    <div
                        class="bg-gray-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-2"
                    >
                        <div class="text-5xl mb-4">🎯</div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-800">
                            Simple & Clean
                        </h4>
                        <p class="text-gray-600">
                            No ads, no trackers, just a straightforward download
                            experience.
                        </p>
                    </div>
                    <div
                        class="bg-gray-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-2"
                    >
                        <div class="text-5xl mb-4">⚡</div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-800">
                            Blazing Fast
                        </h4>
                        <p class="text-gray-600">
                            Enjoy rapid, direct video fetching for quick
                            downloads.
                        </p>
                    </div>
                    <div
                        class="bg-gray-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-2"
                    >
                        <div class="text-5xl mb-4">💾</div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-800">
                            WebM/MP4 Format
                        </h4>
                        <p class="text-gray-600">
                            Videos are conveniently saved in the modern and
                            efficient .webm/.mp4 format.
                        </p>
                    </div>
                    <div
                        class="bg-gray-50 p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-2"
                    >
                        <div class="text-5xl mb-4">📱</div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-800">
                            Cross-Device Ready
                        </h4>
                        <p class="text-gray-600">
                            Optimized for a seamless experience on both mobile
                            and desktop devices.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <footer
            class="bg-gray-900 text-white text-center py-8 mt-16 shadow-inner-top"
        >
            <p class="text-lg mb-4">
                Made with
                <span class="text-red-500 animate-pulse-slow">❤️</span> by
                <span class="font-extrabold text-red-400">Dhanush</span> © 2025
            </p>

            <div class="flex justify-center items-center space-x-6 mb-6">
                <a
                    href="https://github.com/dhanushs005"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-gray-400 hover:text-white transition-colors duration-300 transform hover:scale-110"
                >
                    <svg
                        class="w-8 h-8"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.475.087.687-.206.687-.458 0-.226-.007-.752-.01-1.487-2.775.603-3.364-1.34-3.364-1.34-.455-1.157-1.11-1.465-1.11-1.465-.908-.618.069-.606.069-.606 1.006.071 1.532 1.03 1.532 1.03.89 1.529 2.347 1.087 2.91.829.091-.645.351-1.087.636-1.338-2.22-.253-4.555-1.113-4.555-4.949 0-1.092.39-1.988 1.029-2.681-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.099 2.651.64.693 1.028 1.589 1.028 2.681 0 3.841-2.339 4.69-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .254.209.548.691.456C21.132 20.198 24 16.442 24 12.017 24 6.484 19.522 2 14 2h-2z"
                            clip-rule="evenodd"
                        />
                    </svg>
                </a>

                <a
                    href="https://dhanushs005.github.io/dhanush-portfolio/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-gray-400 hover:text-white transition-colors duration-300 transform hover:scale-110"
                >
                    <svg
                        class="w-8 h-8"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                    >
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-8c0-2.76 2.24-5 5-5s5 2.24 5 5H7zm13-1h-2.09c-.39-3.23-2.84-5.69-6.07-6.07V4c3.59.45 6.41 3.28 6.41 6.91zM4 11h2.09c.39 3.23 2.84 5.69 6.07 6.07V20c-3.59-.45-6.41-3.28-6.41-6.91z"
                        />
                    </svg>
                </a>

                <a
                    href="https://www.linkedin.com/in/dhanush-s1006/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-gray-400 hover:text-white transition-colors duration-300 transform hover:scale-110"
                >
                    <svg
                        class="w-8 h-8"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                    >
                        <path
                            d="M20.447 20.452h-3.554v-5.569c0-1.325-.028-3.044-1.852-3.044-1.853 0-2.136 1.445-2.136 2.955v5.658H9.596V9.413h3.418v1.564h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 6.879v6.353zM7.943 7.556a1.921 1.921 0 01-1.923-1.922 1.921 1.921 0 011.923-1.922c1.047 0 1.923.863 1.923 1.922 0 1.059-.876 1.922-1.923 1.922zM4.416 20.452H7.97V9.413H4.416v11.039z"
                        />
                    </svg>
                </a>
            </div>

            <p class="text-sm text-gray-400 max-w-2xl mx-auto px-4">
                This tool is intended for educational and personal archival use
                only. Please ensure you comply with all applicable copyright
                laws and terms of service.
            </p>
        </footer>

        <script>
            async function startDownload() {
                const urlInput = document.getElementById("url");
                const resolutionSelect = document.getElementById("resolution");
                const progressBar = document.getElementById("progressBar");
                const progressFill = document.getElementById("progressFill");
                const progressText = document.getElementById("progressText");
                const percentageText =
                    document.getElementById("percentageText");
                const downloadButton = document.querySelector(
                    'button[onclick="startDownload()"]',
                );

                const url = urlInput.value.trim();
                const resolution = resolutionSelect.value;

                if (!url) {
                    alert("Please paste a YouTube URL!");
                    urlInput.focus();
                    return;
                }
                if (!resolution) {
                    alert("Please select a resolution!");
                    resolutionSelect.focus();
                    return;
                }

                // Show progress bar and reset state
                progressBar.classList.remove("hidden");
                progressBar.classList.add("opacity-0"); // Start hidden for transition
                setTimeout(() => progressBar.classList.remove("opacity-0"), 10); // Fade in
                progressFill.style.width = "0%";
                percentageText.innerText = "0%";
                progressText.innerText = "Connecting...";
                downloadButton.disabled = true; // Disable button during download
                downloadButton.classList.add(
                    "opacity-70",
                    "cursor-not-allowed",
                );

                let percent = 0;
                // Simulate initial processing/fetching, then actual download
                let phase = 0; // 0: initial, 1: downloading
                const interval = setInterval(() => {
                    if (phase === 0) {
                        percent = Math.min(25, percent + Math.random() * 5); // Rapid initial
                        if (percent >= 25) {
                            progressText.innerText =
                                "Fetching video details...";
                        }
                    } else if (phase === 1) {
                        percent = Math.min(95, percent + Math.random() * 2); // Slower download
                        progressText.innerText = "Downloading...";
                    }
                    progressFill.style.width = percent + "%";
                    percentageText.innerText = Math.floor(percent) + "%";
                }, 200);

                try {
                    const response = await fetch(
                        "https://reddrop-j2dm.onrender.com/download", // Ensure your backend is running on this port
                        {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ url, resolution }),
                        },
                    );

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.message || "Download failed");
                    }

                    // Once fetch is successful, transition to downloading phase
                    phase = 1;

                    const blob = await response.blob();
                    const link = document.createElement("a");
                    link.href = URL.createObjectURL(blob);

                    // Attempt to get video title from headers or default
                    const contentDisposition = response.headers.get(
                        "Content-Disposition",
                    );
                    let filename = "video.webm";
                    if (
                        contentDisposition &&
                        contentDisposition.indexOf("filename=") !== -1
                    ) {
                        filename = contentDisposition
                            .split("filename=")[1]
                            .split(";")[0]
                            .replace(/"/g, "");
                    } else {
                        // Fallback to a basic filename or parse from URL (less reliable)
                        const urlParams = new URLSearchParams(
                            new URL(url).search,
                        );
                        const videoId = urlParams.get("v");
                        if (videoId) {
                            filename = `youtube_video_${videoId}_${resolution}p.webm`;
                        }
                    }
                    link.download = filename;
                    link.click();

                    // Finalize progress
                    clearInterval(interval);
                    progressFill.style.width = "100%";
                    percentageText.innerText = "100%";
                    progressText.innerText = "Download Complete!";
                    setTimeout(() => {
                        // Hide progress bar after a short delay
                        progressBar.classList.add("opacity-0");
                        setTimeout(
                            () => progressBar.classList.add("hidden"),
                            500,
                        );
                    }, 2000);
                } catch (err) {
                    clearInterval(interval);
                    progressFill.style.width = "0%";
                    percentageText.innerText = "0%";
                    progressText.innerText = "Error!";
                    alert(
                        `❌ Failed to download: ${err.message || "An unknown error occurred"}. Please ensure the URL is valid and try again.`,
                    );
                    progressBar.classList.add("hidden"); // Hide on error
                } finally {
                    downloadButton.disabled = false; // Re-enable button
                    downloadButton.classList.remove(
                        "opacity-70",
                        "cursor-not-allowed",
                    );
                }
            }
        </script>
    </body>
</html>
